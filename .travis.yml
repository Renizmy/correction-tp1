language: java

script:
  - cd ./simple-api
  - mvn clean verify
  
  -echo "$DOCKER_PASSWORD" | docker login -u "$DOCKER_USERNAME" --password-stdin
  -docker build -t $DOCKER_USERNAME/tp2-devops .
  -docker push $DOCKER_USERNAME/tp2-devops
 
cache:
  directories:
   -$HOME/.m2
 
services:
  -docker
 
branches:
  only:
   - develop
